<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Punições</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Painel de Controle</h1>
        <form>
            <h2>Aplicar Punição</h2>

            <label for="username">Nome e Tag (Ex: usuario#1234)</label>
            <input type="text" id="username" name="username" required>

            <label for="punishment">Tipo de Punição</label>
            <select id="punishment" name="punishment">
                <option value="timeout">Silenciar (Timeout)</option>
                <option value="kick">Expulsar (Kick)</option>
                <option value="ban">Banir (Ban)</option>
            </select>

            <label for="duration">Duração em Minutos (para Silenciar)</label>
            <input type="number" id="duration" name="duration" placeholder="Ex: 60 para 1 hora">

            <label for="reason">Motivo</label>
            <textarea id="reason" name="reason" rows="3" required></textarea>

            <button type="submit">Aplicar Punição</button>
        </form>
        <div id="response"></div>
    </div>
    <script>
        const form = document.querySelector('form');
        const responseDiv = document.getElementById('response');
        
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());
            
            responseDiv.textContent = 'Processando, aguarde...';
            responseDiv.className = '';

            try {
                const response = await fetch('/punir', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                responseDiv.textContent = result.message;
                responseDiv.className = response.ok ? 'success' : 'error';
                
                if (response.ok) {
                    form.reset();
                }
            } catch (error) {
                responseDiv.textContent = 'Erro de comunicação com o servidor.';
                responseDiv.className = 'error';
            }
        });
    </script>
</body>
</html>
